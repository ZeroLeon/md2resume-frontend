<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MD2Resume - Markdownç®€å†ç¾åŒ–HTMLç”Ÿæˆå™¨</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/templates.css">
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <h1>ğŸ“„ MD2Resume</h1>
            <p class="subtitle">Markdownç®€å†ç¾åŒ–HTMLç”Ÿæˆå™¨ - æ”¯æŒä¸€é”®IPFSéƒ¨ç½²</p>
        </header>

        <!-- ä¸»è¦å†…å®¹åŒº -->
        <div class="main-content">
            <!-- å·¦ä¾§ï¼šè¾“å…¥åŒº -->
            <div class="input-section">
                <div class="section-header">
                    <h2>ğŸ“ Markdownè¾“å…¥</h2>
                    <div class="input-actions">
                        <button id="uploadBtn" class="btn btn-secondary">ğŸ“ ä¸Šä¼ MDæ–‡ä»¶</button>
                        <button id="clearBtn" class="btn btn-outline">ğŸ—‘ï¸ æ¸…ç©º</button>
                    </div>
                </div>

                <div class="input-wrapper">
                    <textarea id="mdInput" placeholder="åœ¨æ­¤ç²˜è´´æ‚¨çš„Markdownç®€å†å†…å®¹...

ç¤ºä¾‹æ ¼å¼ï¼š
# å¼ ä¸‰
**å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ** | ğŸ“§ zhangsan@email.com | ğŸ“± 138-xxxx-xxxx | ğŸ“ åŒ—äº¬å¸‚

## ğŸ’¼ å·¥ä½œç»å†

### é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ | ç§‘æŠ€å…¬å¸ (2022.01 - è‡³ä»Š)
- ä½¿ç”¨Reactå’ŒTypeScriptå¼€å‘ä¼ä¸šçº§åº”ç”¨
- è´Ÿè´£å‰ç«¯æ¶æ„è®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–
- å¸¦é¢†5äººå›¢é˜Ÿå®Œæˆæ ¸å¿ƒäº§å“é‡æ„

## ğŸ¯ æŠ€èƒ½ä¸“é•¿
- **å‰ç«¯**: React, Vue, TypeScript, JavaScript
- **åç«¯**: Node.js, Python, MySQL, MongoDB
- **å·¥å…·**: Git, Docker, CI/CD, AWS

## ğŸ“ æ•™è‚²èƒŒæ™¯
**è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯** | æœ¬ç§‘ | æŸæŸå¤§å­¦ (2018-2022)"></textarea>
                    <input type="file" id="fileInput" accept=".md,.markdown" style="display: none;">
                </div>
            </div>

            <!-- å³ä¾§ï¼šé¢„è§ˆåŒº -->
            <div class="preview-section">
                <div class="section-header">
                    <h2>ğŸ‘ï¸ å®æ—¶é¢„è§ˆ</h2>
                    <div class="preview-actions">
                        <button id="fullscreenBtn" class="btn btn-secondary">ğŸ” å…¨å±é¢„è§ˆ</button>
                    </div>
                </div>

                <div class="preview-wrapper">
                    <div id="previewContent" class="preview-content">
                        <div class="preview-placeholder">
                            <p>ğŸ“„ ç®€å†é¢„è§ˆå°†åœ¨è¿™é‡Œæ˜¾ç¤º</p>
                            <p>è¯·åœ¨å·¦ä¾§è¾“å…¥Markdownå†…å®¹æˆ–ä¸Šä¼ æ–‡ä»¶</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ¨¡æ¿é€‰æ‹©åŒº -->
        <div class="template-section">
            <div class="section-header">
                <h2>ğŸ¨ é€‰æ‹©æ¨¡æ¿é£æ ¼</h2>
                <p class="template-description">8ç§ä¸“ä¸šæŠ€æœ¯é£æ ¼æ¨¡æ¿ï¼Œä¸“ä¸ºå¼€å‘è€…è®¾è®¡</p>
            </div>

            <div class="template-grid">
                <div class="template-card" data-template="hacker-black">
                    <div class="template-preview hacker-black-preview"></div>
                    <h3>æå®¢é»‘</h3>
                    <p>æš—è‰²ä¸»é¢˜ï¼Œç»¿å­—é«˜äº®</p>
                </div>

                <div class="template-card" data-template="terminal-white">
                    <div class="template-preview terminal-white-preview"></div>
                    <h3>ç»ˆç«¯ç™½</h3>
                    <p>ç»ˆç«¯ç•Œé¢é£æ ¼</p>
                </div>

                <div class="template-card" data-template="code-gray">
                    <div class="template-preview code-gray-preview"></div>
                    <h3>ä»£ç ç°</h3>
                    <p>ä¸­æ€§è‰²è°ƒï¼Œä»£ç é£æ ¼</p>
                </div>

                <div class="template-card active" data-template="github-blue">
                    <div class="template-preview github-blue-preview"></div>
                    <h3>GitHubè“</h3>
                    <p>ä»¿GitHubé£æ ¼</p>
                </div>

                <div class="template-card" data-template="minimal-green">
                    <div class="template-preview minimal-green-preview"></div>
                    <h3>ç®€çº¦ç»¿</h3>
                    <p>æ¸…æ–°ç®€æ´è®¾è®¡</p>
                </div>

                <div class="template-card" data-template="business-orange">
                    <div class="template-preview business-orange-preview"></div>
                    <h3>å•†åŠ¡æ©™</h3>
                    <p>ä¸“ä¸šå•†åŠ¡æ„Ÿ</p>
                </div>

                <div class="template-card" data-template="gradient-purple">
                    <div class="template-preview gradient-purple-preview"></div>
                    <h3>æ¸å˜ç´«</h3>
                    <p>ç°ä»£æ¸å˜æ•ˆæœ</p>
                </div>

                <div class="template-card" data-template="neon-red">
                    <div class="template-preview neon-red-preview"></div>
                    <h3>éœ“è™¹çº¢</h3>
                    <p>éœ“è™¹ç¯æŠ€æœ¯æ„Ÿ</p>
                </div>
            </div>
        </div>

        <!-- æ“ä½œæŒ‰é’®åŒº -->
        <div class="action-section">
            <div class="action-buttons">
                <button id="downloadBtn" class="btn btn-primary">
                    ğŸ’¾ ä¸‹è½½HTMLæ–‡ä»¶
                </button>
                <button id="deployBtn" class="btn btn-success">
                    ğŸš€ ä¸€é”®éƒ¨ç½²åˆ°IPFS
                </button>
                <button id="historyBtn" class="btn btn-secondary">
                    ğŸ“‹ éƒ¨ç½²å†å²
                </button>
            </div>

            <div id="deployStatus" class="deploy-status" style="display: none;">
                <div class="deploy-progress">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <p class="deploy-message">å‡†å¤‡éƒ¨ç½²...</p>
                </div>
            </div>
        </div>

        <!-- éƒ¨ç½²æˆåŠŸå¼¹çª— -->
        <div id="successModal" class="modal" style="display: none;">
            <div class="modal-content success-modal">
                <div class="modal-header">
                    <div class="success-icon">ğŸ‰</div>
                    <h3>éƒ¨ç½²æˆåŠŸï¼</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="success-message">
                        <p>ğŸ“„ ç®€å†å·²æˆåŠŸéƒ¨ç½²åˆ°IPFSç½‘ç»œï¼Œè·å¾—æ°¸ä¹…è®¿é—®é“¾æ¥ï¼</p>
                    </div>

                    <div class="links-section">
                        <h4>ğŸ”— è®¿é—®é“¾æ¥</h4>
                        <div class="link-item">
                            <label>ä¸»è¦é“¾æ¥ï¼š</label>
                            <div class="link-wrapper">
                                <input type="text" id="mainLink" readonly class="link-input" value="">
                                <button class="copy-btn" data-target="mainLink">ğŸ“‹ å¤åˆ¶</button>
                            </div>
                        </div>
                        <div class="link-item">
                            <label>IPFSé“¾æ¥ï¼š</label>
                            <div class="link-wrapper">
                                <input type="text" id="ipfsLink" readonly class="link-input" value="">
                                <button class="copy-btn" data-target="ipfsLink">ğŸ“‹ å¤åˆ¶</button>
                            </div>
                        </div>
                        <div class="link-item">
                            <label>ç½‘å…³é“¾æ¥ï¼š</label>
                            <div class="link-wrapper">
                                <input type="text" id="gatewayLink" readonly class="link-input" value="">
                                <button class="copy-btn" data-target="gatewayLink">ğŸ“‹ å¤åˆ¶</button>
                            </div>
                        </div>
                    </div>

                    <div class="features-section">
                        <h4>âœ… IPFSç‰¹æ€§</h4>
                        <ul>
                            <li>ğŸŒ æ°¸ä¹…å­˜å‚¨ï¼Œæ°¸ä¸åˆ é™¤</li>
                            <li>ğŸš€ å…¨çƒè®¿é—®ï¼ŒæŠ—å®¡æŸ¥</li>
                            <li>ğŸ”§ å¤šç½‘å…³æ”¯æŒï¼Œç¡®ä¿å¯ç”¨æ€§</li>
                            <li>ğŸ’° é›¶æˆæœ¬ï¼Œå®Œå…¨å…è´¹</li>
                        </ul>
                    </div>

                    <div class="tips-section">
                        <h4>ğŸ’¡ ä½¿ç”¨æç¤º</h4>
                        <ul>
                            <li>ğŸ“‹ æ‚¨å¯ä»¥åœ¨"éƒ¨ç½²å†å²"ä¸­ç®¡ç†æ‰€æœ‰å·²éƒ¨ç½²çš„ç®€å†</li>
                            <li>ğŸ”— é“¾æ¥å¯ä»¥ç›´æ¥åˆ†äº«ç»™HRå’Œæ‹›è˜æ–¹</li>
                            <li>âš¡ æ”¯æŒç¦»çº¿ç¼“å­˜ï¼Œè®¿é—®é€Ÿåº¦æ›´å¿«</li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="successModalOk" class="btn btn-primary">ç¡®å®š</button>
                    <button id="successModalPreview" class="btn btn-success">ğŸ‘ï¸ é¢„è§ˆç®€å†</button>
                </div>
            </div>
        </div>

        <!-- éƒ¨ç½²å†å²å¼¹çª— -->
        <div id="historyModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ğŸ“‹ éƒ¨ç½²å†å²</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="historyList" class="history-list">
                        <p class="no-history">æš‚æ— éƒ¨ç½²å†å²</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- å…¨å±é¢„è§ˆå¼¹çª— -->
        <div id="fullscreenModal" class="modal" style="display: none;">
            <div class="modal-content fullscreen">
                <div class="modal-header">
                    <h3>ğŸ‘ï¸ å…¨å±é¢„è§ˆ</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="fullscreenPreview" class="fullscreen-preview"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        // ç®€åŒ–çš„ä¸»åº”ç”¨ç±»
        class MD2Resume {
            constructor() {
                this.currentTemplate = 'github-blue';
                this.mdContent = '';
                this.init();
            }

            init() {
                this.bindEvents();
                this.loadSampleContent();
                this.updatePreview();
            }

            bindEvents() {
                // è¾“å…¥äº‹ä»¶
                const mdInput = document.getElementById('mdInput');
                mdInput.addEventListener('input', () => {
                    this.mdContent = mdInput.value;
                    this.updatePreview();
                });

                // æ¨¡æ¿é€‰æ‹©
                document.querySelectorAll('.template-card').forEach(card => {
                    card.addEventListener('click', () => {
                        document.querySelectorAll('.template-card').forEach(c => c.classList.remove('active'));
                        card.classList.add('active');
                        this.currentTemplate = card.dataset.template;
                        this.updatePreview();
                    });
                });

                // æ–‡ä»¶ä¸Šä¼ 
                document.getElementById('uploadBtn').addEventListener('click', () => {
                    document.getElementById('fileInput').click();
                });

                document.getElementById('fileInput').addEventListener('change', (e) => {
                    this.handleFileUpload(e);
                });

                // æ¸…ç©ºå†…å®¹
                document.getElementById('clearBtn').addEventListener('click', () => {
                    if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {
                        document.getElementById('mdInput').value = '';
                        this.mdContent = '';
                        this.updatePreview();
                    }
                });

                // ä¸‹è½½HTML
                document.getElementById('downloadBtn').addEventListener('click', () => {
                    this.downloadHTML();
                });

                // éƒ¨ç½²æŒ‰é’®
                document.getElementById('deployBtn').addEventListener('click', () => {
                    this.deployToIPFS();
                });

                // å…¨å±é¢„è§ˆ
                document.getElementById('fullscreenBtn').addEventListener('click', () => {
                    this.showFullscreen();
                });

                // æ¨¡æ€æ¡†å…³é—­
                document.querySelectorAll('.modal-close').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const modal = e.target.closest('.modal');
                        modal.style.display = 'none';
                    });
                });

                // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            modal.style.display = 'none';
                        }
                    });
                });

                // æˆåŠŸå¼¹çª—ç¡®å®šæŒ‰é’®
                document.getElementById('successModalOk').addEventListener('click', () => {
                    document.getElementById('successModal').style.display = 'none';
                });

                // å¤åˆ¶æŒ‰é’®
                document.getElementById('successModal').addEventListener('click', async (e) => {
                    if (e.target.classList.contains('copy-btn')) {
                        const targetId = e.target.dataset.target;
                        const input = document.getElementById(targetId);
                        if (input) {
                            try {
                                await navigator.clipboard.writeText(input.value);
                                const originalText = e.target.textContent;
                                e.target.textContent = 'âœ… å·²å¤åˆ¶';
                                setTimeout(() => {
                                    e.target.textContent = originalText;
                                }, 2000);
                            } catch (error) {
                                console.error('å¤åˆ¶å¤±è´¥:', error);
                            }
                        }
                    }
                });

                // éƒ¨ç½²å†å²æŒ‰é’®
                document.getElementById('historyBtn').addEventListener('click', () => {
                    document.getElementById('historyModal').style.display = 'flex';
                });
            }

            loadSampleContent() {
                const sampleContent = `# ææ˜
**å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ** | ğŸ“§ liming.dev@email.com | ğŸ“± 186-xxxx-xxxx | ğŸ“ ä¸Šæµ·å¸‚ | ğŸŒ github.com/liming

## ğŸ’¼ å·¥ä½œç»å†

### é«˜çº§å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ | åˆ›æ–°ç§‘æŠ€æœ‰é™å…¬å¸ (2022.03 - è‡³ä»Š)
**è´Ÿè´£é¡¹ç›®**: ä¼ä¸šçº§SaaSå¹³å°å¼€å‘
- ä½¿ç”¨React + TypeScript + Reduxå¼€å‘æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼Œæ”¯æ’‘10ä¸‡+æ—¥æ´»ç”¨æˆ·
- ä¸»å¯¼å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼Œé¡µé¢åŠ è½½é€Ÿåº¦æå‡60%ï¼ŒLighthouseè¯„åˆ†ä»75æå‡è‡³95

## ğŸ¯ æŠ€èƒ½ä¸“é•¿

### å‰ç«¯æŠ€æœ¯
- **è¯­è¨€**: JavaScript (ES6+), TypeScript, HTML5, CSS3/Sass
- **æ¡†æ¶**: React, Vue.js, Next.js, Angular

### åç«¯æŠ€æœ¯
- **è¯­è¨€**: Node.js, Python, Java
- **æ¡†æ¶**: Express.js, Django, Spring Boot

## ğŸ“ æ•™è‚²èƒŒæ™¯

### è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ | æœ¬ç§‘ | æŸæŸå¤§å­¦ (2016.09 - 2020.06)
- **GPA**: 3.8/4.0 (ä¸“ä¸šæ’åå‰10%)
- **ä¸»ä¿®è¯¾ç¨‹**: æ•°æ®ç»“æ„ã€ç®—æ³•è®¾è®¡ã€è®¡ç®—æœºç½‘ç»œ

## ğŸ… è£èª‰è®¤è¯
- **AWSè®¤è¯è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆ** (2022)
- **PMPé¡¹ç›®ç®¡ç†ä¸“ä¸šäººå£«** (2023)

---
**æœ€åæ›´æ–°**: 2024å¹´1æœˆ | **æœŸæœ›èŒä½**: é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ`;

                document.getElementById('mdInput').value = sampleContent;
                this.mdContent = sampleContent;
            }

            handleFileUpload(event) {
                const file = event.target.files[0];
                if (!file) return;

                if (!file.name.match(/\.(md|markdown)$/i)) {
                    alert('è¯·ä¸Šä¼ Markdownæ–‡ä»¶ (.md æˆ– .markdown)');
                    return;
                }

                const reader = new FileReader();
                reader.onload = (e) => {
                    const content = e.target.result;
                    document.getElementById('mdInput').value = content;
                    this.mdContent = content;
                    this.updatePreview();
                };
                reader.readAsText(file);
            }

            updatePreview() {
                const previewContent = document.getElementById('previewContent');

                if (!this.mdContent.trim()) {
                    previewContent.innerHTML = `
                        <div class="preview-placeholder">
                            <p>ğŸ“„ ç®€å†é¢„è§ˆå°†åœ¨è¿™é‡Œæ˜¾ç¤º</p>
                            <p>è¯·åœ¨å·¦ä¾§è¾“å…¥Markdownå†…å®¹æˆ–ä¸Šä¼ æ–‡ä»¶</p>
                        </div>
                    `;
                    return;
                }

                try {
                    const htmlContent = marked.parse(this.mdContent);
                    previewContent.innerHTML = `<div class="resume-content">${htmlContent}</div>`;
                    previewContent.className = `preview-content template-${this.currentTemplate}`;
                } catch (error) {
                    console.error('Markdownè§£æé”™è¯¯:', error);
                    previewContent.innerHTML = `
                        <div class="preview-error">
                            <p>âŒ Markdownè§£æå¤±è´¥</p>
                            <p>è¯·æ£€æŸ¥æ‚¨çš„Markdownæ ¼å¼æ˜¯å¦æ­£ç¡®</p>
                        </div>
                    `;
                }
            }

            showFullscreen() {
                const modal = document.getElementById('fullscreenModal');
                const fullscreenPreview = document.getElementById('fullscreenPreview');

                if (!this.mdContent.trim()) {
                    alert('è¯·å…ˆè¾“å…¥æˆ–ä¸Šä¼ Markdownå†…å®¹');
                    return;
                }

                try {
                    const htmlContent = marked.parse(this.mdContent);
                    fullscreenPreview.innerHTML = `<div class="resume-content">${htmlContent}</div>`;
                    fullscreenPreview.className = `fullscreen-preview template-${this.currentTemplate}`;
                    modal.style.display = 'flex';
                } catch (error) {
                    console.error('å…¨å±é¢„è§ˆé”™è¯¯:', error);
                    alert('é¢„è§ˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥Markdownæ ¼å¼');
                }
            }

            downloadHTML() {
                if (!this.mdContent.trim()) {
                    alert('è¯·å…ˆè¾“å…¥æˆ–ä¸Šä¼ Markdownå†…å®¹');
                    return;
                }

                try {
                    const htmlContent = marked.parse(this.mdContent);
                    const title = this.mdContent.match(/^#\s+(.+)$/m) ? this.mdContent.match(/^#\s+(.+)$/m)[1].trim() : 'ç®€å†';

                    const fullHTML = `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title} - MD2Resume</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; background: #ffffff; color: #24292e; }
        .resume-container { max-width: 800px; margin: 0 auto; background: #ffffff; color: #24292e; min-height: 100vh; padding: 40px 20px; }
        h1 { color: #0366d6; font-size: 2.4em; font-weight: 700; margin-bottom: 15px; line-height: 1.2; }
        h2 { color: #0366d6; border-bottom: 2px solid #e1e4e8; font-size: 1.5em; margin-top: 30px; margin-bottom: 15px; padding-bottom: 8px; }
        h3 { color: #24292e; font-size: 1.3em; margin-top: 20px; margin-bottom: 10px; }
        p { margin-bottom: 12px; line-height: 1.6; }
        ul, ol { margin-bottom: 15px; padding-left: 25px; }
        li { margin-bottom: 6px; line-height: 1.6; }
        @media print { body { background: white !important; color: black !important; } }
    </style>
</head>
<body>
    <div class="resume-container">
        <div class="resume-content">
            ${htmlContent}
        </div>
    </div>
</body>
</html>`;

                    const blob = new Blob([fullHTML], { type: 'text/html;charset=utf-8' });
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = `${title}-${this.currentTemplate}.html`;
                    link.click();
                    URL.revokeObjectURL(link.href);
                } catch (error) {
                    console.error('ä¸‹è½½å¤±è´¥:', error);
                    alert('ä¸‹è½½å¤±è´¥ï¼Œè¯·é‡è¯•');
                }
            }

            async deployToIPFS() {
                if (!this.mdContent.trim()) {
                    alert('è¯·å…ˆè¾“å…¥æˆ–ä¸Šä¼ Markdownå†…å®¹');
                    return;
                }

                const statusDiv = document.getElementById('deployStatus');
                const progressBar = statusDiv.querySelector('.progress-fill');
                const messageElement = statusDiv.querySelector('.deploy-message');

                statusDiv.style.display = 'block';
                progressBar.style.width = '0%';
                messageElement.textContent = 'å¼€å§‹éƒ¨ç½²...';

                try {
                    // æ£€æµ‹ç¯å¢ƒ
                    const isProduction = window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1';
                    const apiUrl = isProduction ? 'https://md2resume-backend-production.up.railway.app' : 'http://localhost:3001';

                    console.log('éƒ¨ç½²ç¯å¢ƒ:', isProduction ? 'ç”Ÿäº§ç¯å¢ƒ' : 'å¼€å‘ç¯å¢ƒ');
                    console.log('API URL:', apiUrl);

                    // ç”ŸæˆHTML
                    progressBar.style.width = '20%';
                    messageElement.textContent = 'ç”ŸæˆHTMLæ–‡ä»¶...';

                    const htmlContent = marked.parse(this.mdContent);
                    const title = this.mdContent.match(/^#\s+(.+)$/m) ? this.mdContent.match(/^#\s+(.+)$/m)[1].trim() : 'ç®€å†';

                    const fullHTML = `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title} - MD2Resume</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; background: #ffffff; color: #24292e; }
        .resume-container { max-width: 800px; margin: 0 auto; background: #ffffff; color: #24292e; min-height: 100vh; padding: 40px 20px; }
        h1 { color: #0366d6; font-size: 2.4em; font-weight: 700; margin-bottom: 15px; line-height: 1.2; }
        h2 { color: #0366d6; border-bottom: 2px solid #e1e4e8; font-size: 1.5em; margin-top: 30px; margin-bottom: 15px; padding-bottom: 8px; }
        h3 { color: #24292e; font-size: 1.3em; margin-top: 20px; margin-bottom: 10px; }
        p { margin-bottom: 12px; line-height: 1.6; }
        ul, ol { margin-bottom: 15px; padding-left: 25px; }
        li { margin-bottom: 6px; line-height: 1.6; }
        @media print { body { background: white !important; color: black !important; } }
    </style>
</head>
<body>
    <div class="resume-container">
        <div class="resume-content">
            ${htmlContent}
        </div>
    </div>
</body>
</html>`;

                    // å‘é€åˆ°åç«¯
                    progressBar.style.width = '60%';
                    messageElement.textContent = 'æ­£åœ¨éƒ¨ç½²åˆ°IPFS...';

                    const response = await fetch(`${apiUrl}/api/deploy`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            htmlContent: fullHTML,
                            fileName: `resume-${Date.now()}.html`
                        })
                    });

                    console.log('APIå“åº”çŠ¶æ€:', response.status);

                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`æœåŠ¡å™¨é”™è¯¯: ${response.status} ${response.statusText}`);
                    }

                    const result = await response.json();
                    console.log('éƒ¨ç½²ç»“æœ:', result);

                    if (result.success) {
                        progressBar.style.width = '100%';
                        messageElement.textContent = 'éƒ¨ç½²æˆåŠŸï¼';

                        // æ˜¾ç¤ºæˆåŠŸå¼¹çª—
                        setTimeout(() => {
                            statusDiv.style.display = 'none';
                            this.showDeploySuccess(result.result);
                        }, 1000);
                    } else {
                        throw new Error(result.error || 'éƒ¨ç½²å¤±è´¥');
                    }

                } catch (error) {
                    console.error('éƒ¨ç½²å¤±è´¥:', error);
                    statusDiv.style.display = 'none';
                    alert(`éƒ¨ç½²å¤±è´¥: ${error.message}`);
                }
            }

            showDeploySuccess(deployResult) {
                const modal = document.getElementById('successModal');

                document.getElementById('mainLink').value = deployResult.ensUrl || deployResult.url;
                document.getElementById('ipfsLink').value = deployResult.ipfsUrl;
                document.getElementById('gatewayLink').value = deployResult.gatewayUrl;

                modal.style.display = 'flex';
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            const app = new MD2Resume();
            window.md2resumeApp = app;
            console.log('MD2Resumeåº”ç”¨å·²åˆå§‹åŒ–');
        });
    </script>
</body>
</html>